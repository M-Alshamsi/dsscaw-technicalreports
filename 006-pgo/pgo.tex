% oneside ought not be used for printed, bound material!
\documentclass[ebook,10pt,openany,oneside]{memoir}
\title{pgo}
\author{nick black}
%\special{pdf:minorversion 7}
% fucks up headers on attack type table
%\usepackage{unicode-math}
%\usepackage{draftwatermark}
\usepackage{amsmath}
\usepackage{fontspec}
\defaultfontfeatures{Scale=MatchUppercase,Ligatures=TeX,Renderer=HarfBuzz}
\usepackage{microtype}
\usepackage{bookmark}
\usepackage{transparent}
\usepackage[svgnames,HSB,table]{xcolor}
\selectcolormodel{rgb}
\usepackage[labelfont=bf]{caption} % for \captionsetup
\usepackage{polyglossia}
\usepackage{pdfpages}
\usepackage{tabularray}
\usepackage[export]{adjustbox}
\usepackage{longtable}
\usepackage{svg}
\usepackage[listingsutf8]{tcolorbox}
\tcbuselibrary{most}
\usepackage{listings}
\usepackage[newfloat]{minted}
\usepackage{makecell}
\usepackage{varwidth}
\usepackage{ifthen}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{biblatex}
\usepackage[siunitx]{circuitikz}
\usepackage[mode=text]{siunitx}
\setsansfont{Kanit}
\setmainfont{Gentium Book}
\setdefaultlanguage{american}
\newfontfamily\japanesefont[Script=CJK]{Noto Serif CJK JP}
\newfontfamily\chinesefont[Script=CJK]{Noto Serif CJK SC}
\setotherlanguages{japanese,chinese}
\usepackage{newunicodechar}
\usepackage{realscripts} % typographical enhancement for sub/superscripts
\usepackage{luatex85} % otherwise pdfx blows up =\
\usepackage[a-3u]{pdfx}
\newfontfamily{\symbolfont}{Symbola}
\newunicodechar{üüâ}{{\symbolfontüüâ}}
\newcolumntype{g}{>{\columncolor{Gray!25}}c} % for alternate column coloring in tabels
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}} % centering within p-type column

% we're either 6x9" or (less desirably) 8.5x11"
\settrims{0pt}{0pt}
\setstocksize{8.75in}{5.625in}
\settrimmedsize{8.5in}{5.5in}{*}
\setlrmarginsandblock{.75in}{*}{1}
\setulmarginsandblock{1in}{1in}{1}       % 2" of total vertical margin
\setlength{\headwidth}{\textwidth}       % don't go to the end of paperback
\settypeblocksize{7in}{\textwidth}{*}    % want 7in of our 9
\checkandfixthelayout                     % print and check layout % W: Command terminated with space. (1)

\newcommand\calign[1]{\raisebox{-0.25\height}{#1}}

\NewTColorBox{speciesbox}{!O{}}{%
  enhanced,
  before skip=0pt,
  after skip=0pt,
  top=0pt,
  bottom=0pt,
  boxsep=0pt,
  middle=0pt,
  fonttitle=\bfseries,
  subtitle style={colback=Shadow!50!black},
  #1}

\NewTColorBox{tipbox}{!O{}}{%
  enhanced,
  title style={color=Shadow!50!black},
  halign title=flush center,
  fonttitle=\bfseries,
  #1}

\makeatletter
\newcommand*{\textoverline}[1]{$\overline{\hbox{#1}}\m@th$}
\makeatother

\chapterstyle{crosshead}

\setminted{fontsize=\footnotesize}

\renewcommand{\insertchapterspace}{}

\newcommand\Midrule[0]{\midrule}

% taken from pgotypes.cpp
\definecolor{Shadow}{HTML}{C247FB}
\definecolor{Bug}{HTML}{A6B91A}
\definecolor{Dark}{HTML}{575063}
\definecolor{Dragon}{HTML}{6F35FC}
\definecolor{electric}{HTML}{F7D02C}
\colorlet{Electric}{electric!80!Black}
\definecolor{Fairy}{HTML}{D685AD}
\definecolor{Fighting}{HTML}{C22E28}
\definecolor{Fire}{HTML}{EE8130}
\definecolor{Flying}{HTML}{8D87DB}
\definecolor{Ghost}{HTML}{5066A3}
\definecolor{Grass}{HTML}{7AC74C}
\definecolor{Ground}{HTML}{D97A4B}
\definecolor{Ice}{HTML}{96D9D6}
\definecolor{Normal}{HTML}{9CA5AB}
\definecolor{Poison}{HTML}{A33EA1}
\definecolor{Psychic}{HTML}{F95587}
\definecolor{Rock}{HTML}{B6A136}
\definecolor{Steel}{HTML}{5E91A4}
\definecolor{Water}{HTML}{6390F0}

\newenvironment{code}{\captionsetup{type=listing}}{}
\SetupFloatingEnvironment{listing}{name=Listing}

%\copypagestyle{dankpanion}{companion}
%\makeoddhead{dankpanion}{{\textbf{\leftmark}}}{}{\textbf{\thepage}}
%\makeevenhead{dankpanion}{{\large \TITLE}}{}{\textbf{\thepage}}

\def\LOGO {
  \textbf{
    \Huge Pok√©mon GO\\
    \Large A Quantitative Approach\\
  }}
\frontmatter
\begin{document}
  \pagestyle{empty}
  \begin{center}
  \LOGO
  \bigskip
  \center{\Large{nick black}}\\
  \vspace{3cm}
  \includegraphics[width=.75\pagewidth,keepaspectratio]{images/pikachuphd.png}
  \end{center}
  \vfill\hrule
  \begin{center}\textsf{Gold \& Appel Publishing}\end{center}
  \hrule
  \clearpage
  %\input{aux/copyright}
  %\clearpage
  \setcounter{page}{1}
  \pagestyle{plain} % want (roman) page numbers
\input{notice}
\clearpage
\ifdefined\epub
\else
  \hypertarget{toc}{}%
  \bookmark[dest=toc]{Contents}
  \tableofcontents*
  %\clearpage
  \hypertarget{lot}{}%
  \bookmark[dest=lot]{List of Tables}
  \listoftables*
  \hypertarget{lof}{}%
  \bookmark[dest=lof]{List of Figures} % if we use 3, it changes to i instead of iii [shrug]
  \listoffigures*
  \fi
\input{foreward}
%--------------------------main text------------------------------------------%
\mainmatter
%\pagestyle{companion}
\input{objectives}
\input{trainer}
\input{friends}
\input{spawn}
\input{types}
\input{attacks}
\input{species}
\input{pok√©mon}
\input{max}
\input{battle}
\input{ooo}
\input{tactics}
\input{unbounded}
\input{bounded}
\input{example}
\input{simul}
\appendix
\chapter{Optimal CP-bound configurations\label{chap:optimal}}
\section{CP1500 bound (Great League)\label{sec:cp1500a}}
Forms\footnote{Forms disallowed in League play are not listed.} are sorted by $\frac{BS}{3}$,
  the arithmetic mean of $Eff_A$, $Eff_D$, and MHP\@.
This metric usually distinguishes between standard and Shadow forms (the geometric mean is always unchanged).
I include $\sqrt[3]{BP}$ and even CP\@.
These rankings \textit{do not} imply that a higher $\sqrt[3]{BP}$ or $\overline{BS}$
  will defeat a lower one.
Other issues---type effectiveness, attack choice, strategy---are usually more important.
Multiple sets of IVs and levels can score equally due to the discrete nature of MHP\@.
In this case, all optimal sets are listed.

$A\%$ is the optimal configuration's advantage in terms of $\frac{BS}{3}$
  over the pessimal ``reasonable'' configuration, i.e. some IV
  and the highest level attainable given the CP bound.
For CP1500 (\autoref{table:cp1500}), when a form can max out, i.e.\ is not restricted by the CP bound,
  the maximum advantage tends to be 10\%--25\%, with a few outliers around 50\%.
It otherwise quickly drops to 4\% or less.
In CP2500 (\autoref{table:cp2500}), the advantage available from IVs is even smaller, as we would expect.
For maxed out Pok√©mon, A\% ranges from 6\%--11\%, increasing as we go down the table.
It is otherwise generally less than 12\%.
These numbers are larger using $\overline{BS}$ than $\sqrt[3]{BP}$; if the latter is used,
  the maximum advantages are contained within 12\%--15\%, and everyone
  else is below 3\%.
\input{out/cp1500a}
\section{CP2500 bound (Ultra League)}
See \autoref{sec:cp1500} for important notes.
\input{out/cp2500a}
\section{CP1500 bound (Great League)\label{sec:cp1500g}}
See \autoref{sec:cp1500} for important notes.
This table uses the geometric mean $\sqrt[3]{BP}$ instead of the arithmetic mean.
Since Shadow forms don't change under the geometric mean, they have been elided.
\input{out/cp1500g}
\section{CP2500 bound (Great League)\label{sec:cp2500g}}
See \autoref{sec:cp1500g} for important notes.
This table uses the geometric mean $\sqrt[3]{BP}$ instead of the arithmetic mean.
Since Shadow forms don't change under the geometric mean, they have been elided.
\input{out/cp2500g}

\chapter{Species by typings\label{chap:speciesbytype}}
Forms are sorted by typing, and within typing by Pok√©dex number.

\begin{center}\textbf{Interpreting a form card}\end{center}

The title displays the form name on the left.
If a Shiny form exists, the shiny icon (\includegraphics[height=1em,keepaspectratio]{images/shiny.png}) is displayed.
The form's base ATK, DEF, and STA appear on the right, followed by the arithmetic and geometric means
 ($\frac{BS}{3}$ and $\sqrt[3]{BP}$).
The colors of the title bar indicate the typing.
To the right of a picture is a table of fast and charged attacks.
I have factored STAB into applicable attacks.
Fast attacks show turns, power, energy generated, PPT, and EPT\@.
Charged attacks show power, energy consumed, and PPE\@.
Attacks in italics cannot be acquired without an Elite TM or special circumstances.
Type, cost group, weather boosting, and existence of a Shiny form are indicated with icons.
The optimal configurations for CP2500 and CP1500-bounded play are specified below the attack table.
The last line of the card shows cost group, generation, and region on the left,
 and evolutionary line on the right.
Finally, if there is a Shadow form, that is indicated, along with the same stats
  provided for the regular form.
%Due to statistically insignificant encounters, I am unable to verify catch and flee
%  rates, which were taken from the Pok√©mon GO Database.

\vfill
\begin{speciesbox}[title=OV-099 Challenger,title style={left color=Flying,right color=Ghost},after title={\hfill 200 120 100 140.00 133.89}]
\footnotesize
\begin{tabularx}{\linewidth}{@{}c X @{}}
\includegraphics[width=0.3\linewidth,valign=c,keepaspectratio]{images/challenger.png} &
\begingroup
\setlength{\tabcolsep}{4pt}
\begin{tabular}{lrrrrr}
\includegraphics[height=1em,keepaspectratio]{images/ghost.png} Astonish & 3 & 14.4 & 10 & 4.8 & 3.3 \\
\includegraphics[height=1em,keepaspectratio]{images/fire.png} Incinerate & 5 & 20 & 20 & 4 & 4 \\
\includegraphics[height=1em,keepaspectratio]{images/flying.png} Brave Bird & & 156 & -55 & 2.84 & \\
\includegraphics[height=1em,keepaspectratio]{images/flying.png} Aeroblast & & 204 & -75 & 2.72 & \\
\end{tabular}
\endgroup
\end{tabularx}
\noindent\begin{minipage}{0.3\linewidth}
\includegraphics[height=2em,keepaspectratio]{images/flying.png}
\includegraphics[height=2em,keepaspectratio]{images/ghost.png}
\includegraphics[height=2em,keepaspectratio]{images/windy.png}
\includegraphics[height=2em,keepaspectratio]{images/fog.png}
\end{minipage}
\begin{minipage}{0.7\linewidth}\raggedleft{}
\vfill{}
  15/15/15@50 (1891)\\
  0/14/1@42.5 (1499)
\end{minipage}\\
CG 4 Gen X Atlantic\hfill{}Columbia ‚Üí \textbf{Challenger} ‚Üí Discovery
\tcbsubtitle[before skip=0pt]{Shadow OV-099 Challenger\hfill{240 100 100 146.67 133.89}}
\end{speciesbox}
\bigskip\noindent{}We see here that OV-099 Challenger is a Ghost+Flying form, with base ATK, DEF, and STA
of 200, 120, and 100, respectively. Its $\frac{BS}{3}$ is 140, and its $\sqrt[3]{BP}$ is 133.89.
It has a Shadow form, but not a Shiny form. The Shadow form has higher ATK and lower DEF, changing
its $\frac{BS}{3}$ to 146.67.
\clearpage
\input{out/species}

\chapter{Users of attacks\label{chap:attackemployers}}
It is often useful to build a team around attacks, rather than Pok√©mon.
This appendix lists the Pok√©mon which can learn and use a given attack.
Pok√©mon in italics will \textit{not} have STAB with the attack.
Pok√©mon in boldface require an Elite TM (or special circumstances) to acquire the move.
\section{Fast attacks\label{sec:usersfast}}
Fast attacks are sorted by type, then duration, then by the product of PPT and EPT\@.
\input{out/fastusers}
\section{Charged attacks\label{sec:userscharged}}
Charged attacks are sorted by type, then PPE\@.
\input{out/chargedusers}
\backmatter
\input{about}
\end{document}
