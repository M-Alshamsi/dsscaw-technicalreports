\chapter{Unbounded team selection}
\label{chap:unbounded}
Trainer Battles make very little use of random numbers (to the best of my
 knowledge, they only show up when checking for a Charged Attack side
 effect).
Their intrigue is instead rooted in ignorance: ignorance of
 the Pokémon you'll face, the order in which you'll face them,
 their statistics (beyond the static properties of the Species),
 their Attacks, and how their Trainer will employ them.

We've established that Pokémon battle fitness is highly dependent
 on opponent details.
We cannot name a globally superior Pokémon---primarily due to Type Effectiveness,
 there is no individual Pokémon that (assuming competent play by both Trainers)
 can defeat all others in even a 1-on-1 contest.
Yet the game provides a per-Pokémon measure of strength in battle: Combat Power (CP).
Obviously no single statistic can account for all possible opponents, but
 we will see that CP is a very questionable assessment for a PvP
 context (and not great for PvE, either).
A Pokémon's CP is defined as:
\[ CP = \max{10, \frac{Mod_A \times \sqrt{Mod_D} \times \sqrt{Mod_S} \times CPM^2}{10}} \]
CP growth is quadratic with respect to $CPM$, linear with $Mod_A$, and
  sublinear with $Mod_D$ and $Mod_S$.
Remember from our Damage equation that $Mod_A$ is divided by $Mod_D$
 to generate one of the factors.
This suggests that $Mod_D$ is undervalued by the CP equation, which
 would seem to suggest that $Mod_A$ is divided by $\sqrt{Mod_D}$.
We will exploit this discrepancy.
MHP isn't used in the Damage equation, but knocking out a Pokémon
 requires inflicting some average Damage $D$ $n$ times,
 where $n = \lceil\frac{MHP}{D}\rceil$.
It is thus similarly undervalued by CP\@.
The quadratic term for CPM makes sense from the perspective of the Damage
 equation, since CPM is used as a factor when calculating Damage in the
 case of both the attacker and defender.
But since CPM is also used to calculate MHP from $Mod_S$, an argument
 can be made that it ought be raised to the third power.
Since $CPM < 1$ for all Levels, $CPM^3 < CPM^2$, and thus it seems
 overvalued by CP\@.

Why would the game use such a flawed measure of power?
A single stat was clearly desired to cover both modes of Pokémon GO battling.
Since Raids allow substitution of defeated Pokémon, but are subject to a timer,
  the ability to defend and absorb Damage is less important than being able to
  quickly inflict damage.
Perhaps this explains the emphasis on attack, but some of the most important
  factors in the Damage equation are left out of CP entirely!
The Power and timing of the Pokémon's Attacks are not present, despite
  dominating the inflicted Damage and overall flow of the battle.
Type effectiveness and STAB have been likewise ignored, as have the
  properties of Shadow Pokémon.
It ought be clear that we must look beyond CP in our selection of Pokémon.

Change to Damage inflicted by an effective Attack is at least 60\%.
Change to Damage inflicted by an ineffective Attack may be as
 low as 37.5\%.
It is probably worth accepting an ineffective Fast Attack if it
 enables an effective Charged Attack, so long as you actually
 get that Charged Attack off.
Early in the battle, this might trick the opponent into leaving
 off a Shield, allowing a \textbf{FIXME}.

Remember that a type advantage is more impactful than a type
  disadvantage (60\% vs -37.5\%):
  all else being equal, it's more important to reduce your Pokémons'
  weaknesses than to increase their strengths.
Every typing is weak against at least one attack type---usually several.
Weakness against only a single type is uncommon: only seven typings manage it, and in two
 of those cases it's a double weakness (\autoref{table:singleweak}.
The only such typings with much population are Electric and Normal. 
\begin{table}[ht]
\begin{center}
\begin{tabular}{ll}
Typing & Weakness\\
\Midrule
Bug+Steel & Fire (doubly weak) \\
Ghost+Normal & Dark \\
Dark+Ghost & Fairy \\
Dark+Poison & Ground \\
Electric & Ground \\
Ground+Water & Grass (doubly weak) \\
Normal & Fighting \\
\end{tabular}
\end{center}
\caption{Single-weakness typings}
\label{table:singleweak}
\end{table}

\section{How important are IVs?}
As with most properties, we could answer ``the details are opponent-dependent''.
More usefully, we can say ``more important with low base stats, less important
  with higher base stats''.
Quantitatively, we can say ``An $IV_A$ of 15 is worth more than STAB to an
  attacker with ATK less than 75. It is worth exactly as much (20\%) as STAB
  to an attacker with ATK of exactly 75. It is worth less than STAB
  to an attacker with ATK greater than 75.''
Similarly, an $IV_A$ of 15 is equal to type effectiveness of 1 when ATK is 25.
For a more plausible ATK of 150, a maximum $IV_A$ is worth a 10\% bonus to attack.
In general, $IV_A$ adds a percentage boost of

\[ frac{IV_A}{ATK} \times 100 \]

\noindent{}to attack, and $IV_D$ lends the same (of course using DEF) to defense.

\textbf{FIXME: for each species, determine worst IV (IV that when taken to max level for a league has the lowest geommean, and difference between it and best}

\section{Team assembly}
Does this extend to teams?
At first, it seems that it might: after all, a team's overall fitness
 depends on the entire opposing team, involving still more unknowns.
We will see that the team mechanism actually allows us to mitigate certain
 unknowns, while adding new ones.
Comparing teams is highly nontrivial, and this greater complexity admits
 further opportunities for strategy and cunning.

It's generally very bad if all three team members are weak to the same type.
Ideally, no two members share a type weakness.

Lead with a species having few/uncommon weaknesses, to avoid having to make the first switch.

You'll use fast attacks more than anything else, so their quality is critical.
There is little use for a Pokémon with bad fast attacks.
Attacks of shorter duration might be thought preferable to those requiring
  several turns, due to greater responsiveness.
In truth, experienced players ought comprehend the universe of possibilities
  within the timescale of a single fast attack.
Attacks of longer duration allow the opponent to blunder with regard to the
  timing of their charged attacks, but experienced players will avoid
  such errors.
Short attacks credit damage more quickly than long ones.
There's no general rule: fast attack selection comes down to attack type
  (both for effectiveness and STAB), the Pokémon's charged attacks,
  and even the $\frac{P \times Eff_A}{Eff_D}$ of expected opponents.
Some Pokémon can learn two fast attacks of the same type and duration,
  where one is strictly inferior to the other in terms of power and
  energy.
Such garbage attacks ought be immediately changed with a Fast TM\@.

Each Pokémon ought know two charged attacks.
Ought they be of different types?
Some say that if they are of the same type, you can select for either time or power, depending on context.
This remains true, however, if they are of different types; the power simply depends on
  the different type relations.
It might indeed be that the more expensive charged move with higher DPE is no
  longer advantageous (if it is ineffective, and the other move is not),
  but it might also be the case that it is even more advantageous,
  or the cheaper move is now more powerful.
Either way, I consider wider type effectiveness to be more important than gains in DPE;
  after all, it is rare that two quality charged moves are separated by a DPE factor
  of 1.6 \textbf{verify this}!
It is best if they are not both ineffective against any typing, and one or the
  other is effective against many typings.
Remember, unlike defense, adding attack types can only be beneficial.
Pokémon that can't learn two good charged attacks having distinct types are best avoided.

  \textbf{FIXME: generate table of such}

\textbf{FIXME...}
